
@model IEnumerable<MvcAuth.Models.tb_detalleOrden>

@{
    ViewBag.Title = "Index";
}
    <style type="text/css">

        .wrapper {
            //padding-top: 20px;
            padding-top: 50px;
        }

        input.parsley-error,
        select.parsley-error,
        textarea.parsley-error {
            border-color: #843534;
            box-shadow: none;
        }
            input.parsley-error:focus,
            select.parsley-error:focus,
            textarea.parsley-error:focus {
                border-color: #843534;
                box-shadow: inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #ce8483
            }
        .parsley-errors-list {
            list-style-type: none;
            opacity: 0;
            transition: all .3s ease-in;
            color: #d16e6c;
            margin-top: 5px;
            margin-bottom: 0;
            padding-left: 0;
        }
            .parsley-errors-list.filled {
                opacity: 1;
                color: #a94442;
            }
    </style>
<!---- AnyOther custom stylesheets ---->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="~/Assets/validation/parsley.min.js"></script>


<section class="inner-bg over-layer-black" style="background-color:rgba(242,242,242,0.9); ">
    <div class="container">
        <div class="row">
            <div class="col-md-4">
                <div class="mini-title inner-style-2">
                    <h3>PROCESANDO SOLICITUD</h3>
                    <p><a href="index-one.html">Inicio</a> <span class="fa fa-angle-right"></span> <a href="#">Procesando Solicitud</a></p>
                </div>
            </div>
        </div>
    </div>
</section>



<section>
    <div class="container">
        <div class="row">
            <!-- Inicio -->
            @using (Html.BeginForm("PlaceOrder", "CheckOut", FormMethod.Post, new { @id = "registro" }))
            {
                <div class="col-md-6" id="tablaCheckOut">
                    <div class="shop-tab">
                        <div class="shop-tab-inner">
                            <ul class="nav nav-tabs" role="tablist">
                                <li role="presentation" class="active">
                                    <a href="#step1" data-toggle="tab" aria-controls="step1" role="tab" title="Step 1">
                                        <span class="round-tab">
                                            ○ Dirección de envío
                                        </span>
                                    </a>
                                </li>
                                <li role="presentation">
                                    <a href="#step2" data-toggle="tab" aria-controls="step2" role="tab" title="Step 2">
                                        <span class="round-tab">
                                            ○ Método de Pago
                                        </span>
                                    </a>
                                </li>

                            </ul>
                        </div>
                        @*{
                                //MvcAuth.Models.Ecomerce2019Entities db = new MvcAuth.Models.Ecomerce2019Entities();

                                // @Html.ValidationMessageFor(db.tb_DetalleEnvio => db.tb_DetalleEnvio., new { @class = "text-danger" })

                                @{
                                    Html.RenderPartial("ViewDetalleEnvio");
                                }
                            }*@


                        <div class="tab-content">
                            <div class="tab-pane active" role="tabpanel" id="step1">
                                <div class="panel panel-info panel-border">
                                    <div class="panel-heading panel-bg"><i class="flaticon-039-home"></i> Dirección de envío</div>
                                    <div class="panel-body">
                                        <div class="form-group">
                                            <div class="col-md-6 col-xs-12">
                                                <strong>Nombre:</strong>

                                                <input type="text" name="FirstName" class="form-control" placeholder="Nombre" value="" required data-parsley-pattern="^[a-zA-ZñÑáéíóúÁÉÍÓÚ\\s]{2,20}" />


                                            </div>
                                            <div class="span1"></div>
                                            <div class="col-md-6 col-xs-12">
                                                <strong>Apellido:</strong>
                                                <input type="text" name="LastName" class="form-control" placeholder="Apellidos" value="" required data-parsley-pattern="^[a-zA-Z]*\s[a-zA-z]+$" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-12"><strong>Email:</strong></div>
                                            <div class="col-md-12"><input type="text" name="Email" placeholder="Email" class="form-control" value="" required data-parsley-type="email" data-parsley-trigger="keyup" /></div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-12"><strong>Telefono:</strong></div>
                                            <div class="col-md-12"><input type="text" name="Mobile" placeholder="Numero de telefono" class="form-control" value="" required data-parsley-type="number" data-parsley-pattern="^[0-9]{9}" /></div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-12"><strong>Dirección:</strong></div>
                                            <div class="col-md-12">
                                                <input type="text" name="Address" class="form-control" placeholder="Tu dirección" value="" required data-parsley-pattern="/^[a-zA-Z0-9\s,.'-]{3,}$/" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-12"><strong>Distrito:</strong></div>
                                            <div class="col-md-12">
                                                @Html.DropDownList("distrito", null, htmlAttributes: new { @class = "form-control", @name = "distrito" })
                                            </div>
                                        </div>
                                        @*
                                            <div class="form-group">
                                                <div class="col-md-12">
                                                    <a href="#step2"  class="btn btn-theme btn-block">Save and continue</a>
                                                </div>
                                            </div>
                                        *@
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" role="tabpanel" id="step2">
                                <!--CREDIT CART PAYMENT-->
                                <div class="panel panel-info panel-border">
                                    <div class="panel-heading panel-bg"><span><i class="flaticon-respiratory-system"></i></span> Método de Pago</div>
                                    <div class="panel-body">
                                        <div class="form-group">
                                            <div class="col-md-12"><strong>Tipo de Tarjeta:</strong></div>
                                            <div class="col-md-12">
                                                @Html.DropDownList("PayMethod", null, htmlAttributes: new { @class = "form-control", @name = "PaymentMethod", @id = "metodo" })
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-12"><strong>Número de Tarjeta de Crédito:</strong></div>
                                            <div class="col-md-12">
                                                <input type="text" class="form-control" name="car_number" value="" placeholder="Tu tarjeta de crédito" data-parsley-type="number" id="car_number" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-12"><strong>CVV:</strong></div>
                                            <div class="col-md-12">
                                                <input type="text" placeholder="Número CVV" class="form-control" name="car_code" id="car_code" value="" data-parsley-pattern="/^[0-9]{3,4}$/" />
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-12">
                                                <strong>Fecha de Expiración</strong>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                                <select class="form-control" name="" id="mes">
                                                    <option value="">Mes</option>
                                                    <option value="01">01</option>
                                                    <option value="02">02</option>
                                                    <option value="03">03</option>
                                                    <option value="04">04</option>
                                                    <option value="05">05</option>
                                                    <option value="06">06</option>
                                                    <option value="07">07</option>
                                                    <option value="08">08</option>
                                                    <option value="09">09</option>
                                                    <option value="10">10</option>
                                                    <option value="11">11</option>
                                                    <option value="12">12</option>
                                                </select>
                                            </div>
                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                                <select class="form-control" name="anno" id="anno">
                                                    <option value="">Año</option>
                                                    <option value="2015">2015</option>
                                                    <option value="2016">2016</option>
                                                    <option value="2018">2018</option>
                                                    <option value="2018">2018</option>
                                                    <option value="2019">2019</option>
                                                    <option value="2020">2020</option>
                                                    <option value="2021">2021</option>
                                                    <option value="2022">2022</option>
                                                    <option value="2023">2023</option>
                                                    <option value="2024">2024</option>
                                                    <option value="2025">2025</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="col-md-12 margin-bottom-10">
                                                <p>Paga seguro usando tus tarjetas de crédito.</p>
                                            </div>
                                            <div class="col-md-12 margin-bottom-30">
                                                <ul class="cards">
                                                    <li class="visa hand">Visa</li>
                                                    <li class="mastercard hand">MasterCard</li>
                                                    <li class="amex hand">Amex</li>
                                                </ul>
                                                <div class="clearfix"></div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="col-md-12">
                                                <button type="submit" class="btn btn-theme btn-block">Guardar y continuar</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!--CREDIT CART PAYMENT END-->
                            </div>
                            <div class="tab-pane" role="tabpanel" id="step3">

                                <!--CREDIT CART PAYMENT-->
                                @*<div class="panel panel-info panel-border">
                                       <div class="panel-heading panel-bg"><span><i class="flaticon-014-online-question"></i></span>   Aplicar Cupón</div>
                                       <div class="panel-body">
                                           <div class="form-group">
                                               <div class="col-md-12"><strong>Aplicar cupón:</strong></div>
                                               <div class="col-md-12"><input type="text" class="form-control" name="car_number" value="" placeholder="Escribe aquí el código" /></div>
                                           </div>
                                           <div class="form-group">
                                               <div class="col-md-12">
                                                   <button type="button" class="btn btn-theme btn-block">Saltar y continuar</button>
                                               </div>
                                           </div>

                                           <div class="form-group">
                                               <div class="col-md-12">
                                                   <button type="button" class="btn btn-theme btn-block">Save and continue</button>
                                               </div>
                                           </div>

                                       </div>
                                    </div>*@
                                <!--CREDIT CART PAYMENT END-->
                            </div>
                            <div class="tab-pane" role="tabpanel" id="complete">
                                <!--CREDIT CART PAYMENT-->
                                <!--CREDIT CART PAYMENT END-->
                            </div>
                            <div class="clearfix"></div>
                        </div>
                    </div>
                </div>

                <!-- Inicio PreView order -->
                <div class="col-md-6 form-horizontal">
                    <div class="panel panel-info panel-border margin-top-none">
                        <div class="panel-heading panel-bg">
                            <i class="flaticon-048-email"></i> Revisar Orden <div class="pull-right"></div>
                        </div>
                        <table style="margin:38px;">

                            <thead>
                                <tr></tr>
                            </thead>
                            <tbody class="panel-body">
                                @if (Session["username"] != null)
                                {

                                    foreach (var item in Model)
                                    {
                                        <tr>
                                            <td style="width:200px;">
                                                <div class="form-group">
                                                    <div class="col-sm-6 col-xs-6">
                                                        <img class="img-responsive" src="@item.tb_Doctor.ImageURL" />
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="col-sm-3 col-xs-3">
                                                        <div class="col-xs-12">@item.tb_Doctor.nomDoctor</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="form-group">
                                                    <div class="col-sm-3 col-xs-3 text-right">
                                                        <h5><span>$</span>@item.cantidadTotal</h5>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    }
                                }
                                else
                                {
                                    <text>Por favor Inicie Sesión para continuar</text>
                                }
                            </tbody>
                            <tfoot>
                                @if (Session["username"] != null)
                                {

                                    foreach (var item in Model)
                                    {
                                        <tr>
                                            <td><div class="form-group"><br /></div></td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="form-group">
                                                    <div class="col-xs-12">
                                                        <strong>Impuesto</strong>
                                                        <div class="pull-right"><span>$</span><span id="subTotal">@item.cantidad</span>.00</div>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="form-group">
                                                    <div class="col-xs-12">
                                                        <strong>Total</strong>
                                                        <div class="pull-right"><span>$</span><span id="totalAmount">@item.cantidadTotal</span>.00</div>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                    }
                                }
                            </tfoot>



                        </table>
                    </div>
                    <div class="row margin-top-50">
                        <div class="col-md-6">
                            <div class="service-item style-2 text-center bg-f8">
                                <div class="margin-bottom-20">
                                    ◘
                                </div>
                                <div class="content">
                                    <h5><a href="#">Horario de Trabajo</a></h5>
                                    <p>Lunes-Viernes: 10am to 8pm <br>Domingo: 11am to 3pm</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="service-item style-2 text-center bg-f8">
                                <div class="margin-bottom-20">
                                    ◘
                                </div>
                                <div class="content">
                                    <h5><a href="#">24 horas de atención</a></h5>
                                    <p>Lunes-Viernes: 10am to 8pm <br>Domingo: 11am to 3pm</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Fin PreView Order -->
            }
            <!-- Fin -->
        </div>
    </div>
</section>

<script type="text/javascript">
    $(document).ready(function () {
        $("#metodo").change(function (e) {
            me = $(this).val();
            console.log(me);
            if (me == 0) {
                $("#car_number").prop('disabled', true);
                $("#car_code").prop('disabled', true);
            }
            else if (me == 3) {
                $("#car_number").prop('disabled', false);
                $("#car_code").prop('disabled', false);
                $("#mes").prop('disabled', false);
                $("#anno").prop('disabled', false);
            } else {
                $("#car_number").prop('disabled', true);
                $("#car_code").prop('disabled', true);
                $("#mes").prop('disabled', true);
                $("#anno").prop('disabled', true);
            }
        })

    });

</script>

<script type="text/javascript">
    $('#registro').parsley();
</script>

<script type="text/javascript">
    $(function () {
        $(':input[type="number"]').change(function () {

            var index = $(this).attr('id').split("-")[1];

            var itemPriceEle = document.getElementById('itemPrice-' + index + '');
            var itemQty = $('#itemQty-' + index + '').val();
            var amountEle = document.getElementById('itemAmount-' + index + '');
            var amount = itemQty * parseInt(itemPriceEle.innerText);
            amountEle.innerText = 7;
            CartsTotal();
        });
        CartsTotal();
    });
    function CartsTotal() {
        var subAmount = 0;
        var i = 0;
        for (var i = 0; i < 5;) {
            if (parseInt($('#itemAmount-' + i + '').text()) > 0) {
                subAmount = subAmount + parseInt($('#itemAmount-' + i + '').text());
                i++;
            }
            else {
                break;
            }
        }
        var subTotalEle = document.getElementById('subTotal');
        subTotalEle.innerText = 7;
        var TotalAmountEle = document.getElementById('totalAmount');
        TotalAmountEle.innerText = 7;
    }
    function TotalAmount() {
        for (var i = 0; i < 5; i++) {
            var itemPriceEle = document.getElementById('itemPrice-' + i + '');
            var itemQty = $('#itemQty-' + i + '').val();
            var amountEle = document.getElementById('itemAmount-' + i + '');

            var amount = itemQty * parseInt(itemPriceEle.innerText);

            amountEle.innerText = 7;
        }
    }
</script>
